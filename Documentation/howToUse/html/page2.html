<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>deviceScheduler: Example Code</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">deviceScheduler
   </div>
   <div id="projectbrief">Software zur Steuerung von Schrittmotoren, Modellbau-Servos und DC-Controllern in Echtzeit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Example Code </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1265.21">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Menlo}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Menlo; min-height: 13.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Menlo; color: #4f8187}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Menlo; color: #008400}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Menlo; color: #78492a}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Menlo; color: #31595d}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Menlo; color: #d12f1b}
    span.s1 {color: #bb2ca2}
    span.s2 {color: #000000}
    span.s3 {color: #4f8187}
    span.s4 {color: #31595d}
    span.s5 {color: #78492a}
    span.s6 {color: #272ad8}

  </style>
</head>
<body>
<p class="p2"></p>
<p class="p2"></p>
<p class="p3"><span class="s2"></span>scheduler<span class="s2"> = </span><span class="s1">new</span><span class="s2"> </span>CCDeviceScheduler<span class="s2">;</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============= devices ======================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p2"></p>
<p class="p5"><span class="s2"></span><span class="s3">schedulerDevice</span><span class="s2"> headLeftServo = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s4">addServo</span><span class="s2">(</span>SERVO_HEAD_LEFT_NAME<span class="s2">, </span>SERVO_HEAD_LEFT_PIN<span class="s2">, </span>SERVO_HEAD_LEFT_MIN_POSITION<span class="s2">, </span>SERVO_HEAD_LEFT_MAX_POSITION<span class="s2">, </span>HEAD_LEFT_PARK_POSITION<span class="s2">);</span></p>
<p class="p5"><span class="s2"></span><span class="s3">schedulerDevice</span><span class="s2"> headRightServo = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s4">addServo</span><span class="s2">(</span>SERVO_HEAD_RIGHT_NAME<span class="s2">, </span>SERVO_HEAD_RIGHT_PIN<span class="s2">, </span>SERVO_HEAD_RIGHT_MIN_POSITION<span class="s2">, </span>SERVO_HEAD_RIGHT_MAX_POSITION<span class="s2">, </span>HEAD_RIGHT_PARK_POSITION<span class="s2">);</span></p>
<p class="p5"><span class="s2"></span><span class="s3">schedulerDevice</span><span class="s2"> tableStepper = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s4">addStepper_A4988</span><span class="s2">(</span>STEPPER_TABLE_NAME<span class="s2">, </span>STEPPER_TABLE_STEP_PIN<span class="s2">, </span>STEPPER_TABLE_DIR_PIN<span class="s2">, </span>STEPPER_TABLE_ENABLE_PIN<span class="s2">, </span>STEPPER_TABLE_HIGHEST_STEPPINGMODE<span class="s2">, </span>STEPPER_TABLE_STEPMODECODES<span class="s2">, </span>STEPPER_TABLE_MICROSTEPPINS<span class="s2">, </span>STEPPER_TABLE_STEPS_PER_ROTATION<span class="s2">);</span></p>
<p class="p5"><span class="s2"></span><span class="s3">schedulerDevice</span><span class="s2"> catStepper = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s4">addStepper_TMC260</span><span class="s2">(</span>STEPPER_CAT_NAME<span class="s2">, </span>STEPPER_CAT_STEP_PIN<span class="s2">, </span>STEPPER_CAT_DIR_PIN<span class="s2">, </span>STEPPER_CAT_ENABLE_PIN<span class="s2">, </span>STEPPER_CAT_CHIPSELECT_PIN<span class="s2">, </span>STEPPER_CAT_CURRENT<span class="s2">, </span>STEPPER_CAT_STEPS_PER_ROTATION<span class="s2">);</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>getAllDevices<span class="s2">();</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============== control buttons =============================================================================================</p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p2"></p>
<p class="p5"><span class="s2"></span><span class="s3">schedulerControlButton</span><span class="s2"> songEndButton = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s4">addControlButton</span><span class="s2">(</span>SONG_END_BUTTON_NAME<span class="s2">, </span>SONG_END_PIN<span class="s2">, </span>SONG_END_ACTIV<span class="s2">);</span></p>
<p class="p5"><span class="s2"></span><span class="s3">schedulerControlButton</span><span class="s2"> songCancelButton = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s4">addControlButton</span><span class="s2">(</span>SONG_CANCEL_BUTTON_NAME<span class="s2">, </span>SONG_CANCEL_PIN<span class="s2">, </span>SONG_CANCEL_ACTIV<span class="s2">);</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>getAllControlButtons<span class="s2">();</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p7"><span class="s2"></span><span class="s3">Serial</span><span class="s2">.</span><span class="s4">println</span><span class="s2">(</span>"................................. initialisation ................................."<span class="s2">);</span></p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============= initialisation tasks =========================================================================================</p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p2"></p>
<p class="p3"><span class="s2"></span>scheduledTask<span class="s2"> initCatStepper = </span>scheduler<span class="s2">-&gt;</span>device<span class="s2">[catStepper]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>-<span class="s5">CAT_FULLRANGE</span>, <span class="s5">CAT_SPEED_VERY_HIGH</span>, <span class="s5">CAT_ACCEL_VERY_HIGH</span>, <span class="s5">CAT_ACCEL_VERY_HIGH</span>);</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[catStepper]-&gt;<span class="s3">task</span>[initCatStepper]-&gt;<span class="s4">startByDate</span>(<span class="s6">100</span>);</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[catStepper]-&gt;<span class="s3">task</span>[initCatStepper]-&gt;<span class="s4">stopByButton</span>(<span class="s5">CAT_PARK_BUTTON</span>, <span class="s5">HIGH</span>, <span class="s4">STOP_NORMAL</span>);</p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>reviewTasks<span class="s2">();</span></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>getAllTasks<span class="s2">();</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============== run initialisation ==========================================================================================</p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p2"></p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s4">run</span>();</p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============== cleaning up =================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p2"></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>deleteAllTasks<span class="s2">();</span></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>deleteAllActions<span class="s2">();</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p7"><span class="s2"></span><span class="s3">Serial</span><span class="s2">.</span><span class="s4">println</span><span class="s2">(</span>"...................................... done ......................................"<span class="s2">);</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============= main tasks ===================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>move to start groove:</p>
<p class="p5"><span class="s2"></span><span class="s3">scheduledTask</span><span class="s2"> driveToCuttingStartPosition = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s3">device</span><span class="s2">[catStepper]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>CAT_CUTTING_START_POSITION<span class="s2">, </span>CAT_SPEED_HIGH<span class="s2">, </span>CAT_ACCEL_HIGH<span class="s2">, </span>CAT_ACCEL_HIGH<span class="s2">);</span></p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[catStepper]-&gt;<span class="s3">task</span>[driveToCuttingStartPosition]-&gt;<span class="s4">startByDate</span>(<span class="s6">100</span>);</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[catStepper]-&gt;<span class="s3">task</span>[driveToCuttingStartPosition]-&gt;<span class="s4">stopByButton</span>(<span class="s5">CAT_END_BUTTON</span>, <span class="s5">HIGH</span>, <span class="s4">STOP_NORMAL</span>);</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>turn the table:</p>
<p class="p3"><span class="s2"></span>scheduledTask<span class="s2"> turnTheTable = </span>scheduler<span class="s2">-&gt;</span>device<span class="s2">[tableStepper]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>grooves_all<span class="s2"> * </span><span class="s6">360</span><span class="s2">, </span>turnTableStepperSpeed<span class="s2">, </span><span class="s5">TABLE_STEP_ACCEL</span><span class="s2">, </span><span class="s5">TABLE_STEP_ACCEL</span><span class="s2">);</span></p>
<p class="p1">scheduler-&gt;device[tableDrive]-&gt;task[turnTheTable]-&gt;startByTriggerpositionOf(catStepper, driveToCuttingStartPosition, <span class="s5">CAT_CUTTING_START_POSITION</span> - <span class="s6">10000</span>);</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>lower head to record surface: start when reached start position of start groove</p>
<p class="p5"><span class="s2"></span><span class="s3">scheduledTask</span><span class="s2"> lowerHeadLeftForCutting = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s3">device</span><span class="s2">[headLeftServo]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>HEAD_LEFT_CUT_POSITION<span class="s2">, </span>LIFT_SPEED_FAST<span class="s2">, </span>LIFT_ACCEL_FAST<span class="s2">, </span>LIFT_ACCEL_FAST<span class="s2">);</span></p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[headLeftServo]-&gt;<span class="s3">task</span>[lowerHeadLeftForCutting]-&gt;<span class="s4">startAfterCompletionOf</span>(catStepper, driveToCuttingStartPosition);</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>lower head to record surface: start when reached start position of start groove</p>
<p class="p5"><span class="s2"></span><span class="s3">scheduledTask</span><span class="s2"> lowerHeadRightForCutting = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s3">device</span><span class="s2">[headRightServo]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>HEAD_RIGHT_CUT_POSITION<span class="s2">, </span>LIFT_SPEED_VERY_SLOW<span class="s2">, </span>LIFT_ACCEL_VERY_SLOW<span class="s2">, </span>LIFT_ACCEL_VERY_SLOW<span class="s2">);</span></p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[headRightServo]-&gt;<span class="s3">task</span>[lowerHeadRightForCutting]-&gt;<span class="s4">startAfterCompletionOf</span>(catStepper, driveToCuttingStartPosition);</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[headRightServo]-&gt;<span class="s3">task</span>[lowerHeadRightForCutting]-&gt;<span class="s4">stopDynamicallyBySensor</span>(<span class="s5">HEAD_INCLINATION_SENSOR</span>, <span class="s5">HEAD_INCLINATION_INIT_STOP</span>, <span class="s5">HEAD_INCLINATION_TARGET</span>, <span class="s5">HEAD_INCLINATION_STOP_PERFORM</span>, <span class="s4">SKIP_APPROXIMATION_PRECISE</span>);</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>make the start groove: start when cutting head reached cutting position</p>
<p class="p3"><span class="s2"></span>scheduledTask<span class="s2"> makeStartGroove = </span>scheduler<span class="s2">-&gt;</span>device<span class="s2">[catStepper]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>catCuttingEndPosition<span class="s2">, </span>catMotorSpeed_startGroove<span class="s2">, </span><span class="s5">CAT_ACCEL_SLOW</span><span class="s2">, </span><span class="s5">CAT_ACCEL_SLOW</span><span class="s2">);</span></p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[catStepper]-&gt;<span class="s3">task</span>[makeStartGroove]-&gt;<span class="s4">startAfterCompletionOf</span>(headRightServo, lowerHeadRightForCutting);</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[catStepper]-&gt;<span class="s3">task</span>[makeStartGroove]-&gt;<span class="s4">switchToNextTaskByTriggerpositionOf</span>(catStepper, makeStartGroove, <span class="s3">catSongStartPosition</span>);</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>make the main groove, cut the song: change head speed to appropriate song-cutting-speed when start groove is done</p>
<p class="p3"><span class="s2"></span>scheduledTask<span class="s2"> makeMainGroove = </span>scheduler<span class="s2">-&gt;</span>device<span class="s2">[catStepper]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>catCuttingEndPosition<span class="s2">, </span>catMotorSpeed_song<span class="s2">, </span><span class="s5">CAT_ACCEL_SLOW</span><span class="s2">, </span><span class="s5">CAT_ACCEL_SLOW</span><span class="s2">);</span></p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[catStepper]-&gt;<span class="s3">task</span>[makeMainGroove]-&gt;<span class="s4">switchToNextTaskByTriggerpositionOf</span>(catStepper, makeMainGroove, <span class="s3">catSongEndPosition</span>);</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>make the end groove: change head speed to end groove speed, when song is done</p>
<p class="p3"><span class="s2"></span>scheduledTask<span class="s2"> makeEndGroove = </span>scheduler<span class="s2">-&gt;</span>device<span class="s2">[catStepper]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>catCuttingEndPosition<span class="s2">, </span>catMotorSpeed_endGroove<span class="s2">, </span><span class="s5">CAT_ACCEL_NORMAL</span><span class="s2">, </span><span class="s5">CAT_ACCEL_NORMAL</span><span class="s2">);</span></p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>lift head after cutting: start when end groove is finished</p>
<p class="p5"><span class="s2"></span><span class="s3">scheduledTask</span><span class="s2"> liftHeadLeftAfterCutting = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s3">device</span><span class="s2">[headLeftServo]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>HEAD_LEFT_TOP_POSITION<span class="s2">, </span>LIFT_SPEED_FAST<span class="s2">, </span>LIFT_ACCEL_SLOW<span class="s2">, </span>LIFT_ACCEL_SLOW<span class="s2">);</span></p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[headLeftServo]-&gt;<span class="s3">task</span>[liftHeadLeftAfterCutting]-&gt;<span class="s4">startAfterCompletionOf</span>(catStepper, makeEndGroove);</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>stop turning the table:</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[tableStepper]-&gt;<span class="s3">task</span>[turnTheTable]-&gt;<span class="s4">stopAfterCompletionOf</span>(headLeftServo, liftHeadLeftAfterCutting, <span class="s4">STOP_NORMAL</span>);</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>lift head complete after cutting: start when other servo finished</p>
<p class="p5"><span class="s2"></span><span class="s3">scheduledTask</span><span class="s2"> liftHeadRightAfterCutting = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s3">device</span><span class="s2">[headRightServo]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>HEAD_RIGHT_TOP_POSITION<span class="s2">, </span>LIFT_SPEED_FAST<span class="s2">, </span>LIFT_ACCEL_SLOW<span class="s2">, </span>LIFT_ACCEL_SLOW<span class="s2">);</span></p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[headRightServo]-&gt;<span class="s3">task</span>[liftHeadRightAfterCutting]-&gt;<span class="s4">startAfterCompletionOf</span>(headLeftServo, liftHeadLeftAfterCutting);</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>drive to park position after all</p>
<p class="p5"><span class="s2"></span><span class="s3">scheduledTask</span><span class="s2"> driveToParkPosition = </span><span class="s3">scheduler</span><span class="s2">-&gt;</span><span class="s3">device</span><span class="s2">[catStepper]-&gt;</span><span class="s4">addTask</span><span class="s2">(</span>CAT_PARK_POSITION<span class="s2">, </span>CAT_SPEED_HIGH<span class="s2">, </span>CAT_ACCEL_HIGH<span class="s2">, </span>CAT_ACCEL_HIGH<span class="s2">);</span></p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[catStepper]-&gt;<span class="s3">task</span>[driveToParkPosition]-&gt;<span class="s4">startAfterCompletionOf</span>(headLeftServo, liftHeadLeftAfterCutting);</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">device</span>[catStepper]-&gt;<span class="s3">task</span>[driveToParkPosition]-&gt;<span class="s4">stopByButton</span>(<span class="s5">CAT_PARK_BUTTON</span>, <span class="s5">HIGH</span>, <span class="s4">STOP_NORMAL</span>);</p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>do the end groove when the button is pressed</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">controlButton</span>[songEndButton]-&gt;<span class="s4">evokeTaskJumpToTask</span>(catStepper, makeMainGroove, <span class="s4">STOP_AND_SWITCH</span>, makeEndGroove);</p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>//<span class="Apple-converted-space">  </span>cancel recording, when button is pressed</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">controlButton</span>[songCancelButton]-&gt;<span class="s4">evokeTaskJumpToTask</span>(catStepper, makeStartGroove, <span class="s4">STOP_AND_SWITCH</span>, driveToParkPosition);</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">controlButton</span>[songCancelButton]-&gt;<span class="s4">evokeTaskJumpToTask</span>(catStepper, makeMainGroove, <span class="s4">STOP_AND_SWITCH</span>, driveToParkPosition);</p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s3">controlButton</span>[songCancelButton]-&gt;<span class="s4">evokeTaskJump</span>(catStepper, makeEndGroove, <span class="s4">STOP</span>);</p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>reviewTasks<span class="s2">();</span></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>getAllTasks<span class="s2">();</span></p>
<p class="p2"></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>getAllControlButtons<span class="s2">();</span></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>getAllActions<span class="s2">();</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============== run it ======================================================================================================</p>
<p class="p4"><span class="s2"></span>// ============================================================================================================================</p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p1"><span class="s3">scheduler</span>-&gt;<span class="s4">run</span>();</p>
<p class="p2"></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>deleteAllTasks<span class="s2">();</span></p>
<p class="p6"><span class="s2"></span><span class="s3">scheduler</span><span class="s2">-&gt;</span>deleteAllActions<span class="s2">();</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
</body>
</html>
 </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
