<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1265.21">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 9.0px Verdana}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 9.0px Verdana; min-height: 11.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Verdana}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Verdana; min-height: 15.0px}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; text-indent: 18.0px; font: 9.0px Verdana}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; text-indent: 18.0px; font: 9.0px Verdana; min-height: 11.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Verdana}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Verdana; min-height: 13.0px}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 10.0px Verdana}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 7.0px Menlo; color: #008400}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 7.0px Menlo; color: #4f8187}
    p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 7.0px Menlo; min-height: 8.0px}
    p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 7.0px Menlo; color: #78492a}
    p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 7.0px Menlo; color: #78492a}
    p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 7.0px Menlo; color: #78492a}
    p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 7.0px Menlo; color: #78492a; min-height: 8.0px}
    p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 7.0px Menlo}
    p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 7.0px Menlo}
    p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; font: 8.0px Menlo; min-height: 9.0px}
    p.p20 {margin: 0.0px 0.0px 0.0px 18.0px; font: 7.0px Monaco}
    p.p21 {margin: 0.0px 0.0px 0.0px 18.0px; font: 7.0px Monaco; min-height: 10.0px}
    p.p22 {margin: 0.0px 0.0px 0.0px 18.0px; font: 8.0px Monaco; min-height: 11.0px}
    p.p23 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    p.p24 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 9.0px Verdana}
    span.s1 {letter-spacing: 0.0px}
    span.s2 {font: 4.0px Menlo; letter-spacing: 0.0px; color: #000000}
    span.s3 {letter-spacing: 0.0px; color: #000000}
    span.s4 {letter-spacing: 0.0px; color: #bb2ca2}
    span.s5 {letter-spacing: 0.0px; color: #4f8187}
    span.s6 {letter-spacing: 0.0px; color: #31595d}
    span.s7 {font: 4.0px Menlo; letter-spacing: 0.0px; color: #4f8187}
    span.s8 {letter-spacing: 0.0px; color: #78492a}
    span.s9 {letter-spacing: 0.0px; color: #272ad8}
    span.s10 {font: 8.0px Verdana; letter-spacing: 0.0px; color: #000000}
    span.s11 {font: 7.0px Menlo; letter-spacing: 0.0px}
    span.Apple-tab-span {white-space:pre}

    @media only screen and (min-width: 600px) { body { width:600px; margin: auto; } }
  </style>
</head>
<body>
<p class="p1"><span class="s1">Christoph Freidhöfer<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s1"><b>Meisterstück-Vorhaben (Stand Januar 2016):</b></span></p>
<p class="p4"><span class="s1"><b></b></span><br></p>
<p class="p5"><span class="s1">Ich baue gerade einen Schallplattenschneide-Automaten. Es ist ein Kunstprojekt. Dieser Apparat, der Voice-o-graph, ist eine Art Passbild-Automat, nur dass darin nicht das Bild, sondern der Ton analog aufgezeichnet wird. In einer kleinen Kabine hat man die Möglichkeit, 3 min Ton aufzunehmen, der simultan in einen 7inch-Schallplattenrohling geschnitten wird. Nachdem man also einen Gruß an einen Menschen in der Ferne, ein Liebesgedicht, seinen Lieblings-Popsong oder vielleicht ein großes Geheimnis ins Mikrofon gesprochen oder gesungen hat, erhält man es als Vinyl-Schallplatte.</span></p>
<p class="p5"><span class="s1">Für das Meisterstück möchte ich das Kernstück des Voice-o-graphen präsentieren:</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p7"><span class="s1">die Steuerungs-Software des Plattenschneiders.</span></p>
<p class="p8"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">Das gesamte Gerät wird durch einen ARM7-Controller gesteuert, die Steuerungs-Software in C/C++ habe ich komplett selbst entwickelt. Erstellt habe ich es auf einem Apple-Computer mit XCode, den Upload bewerkstellige ich mit der Arduino-Toolchain.<span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">Das Steuerungsprogramm ist ein Scheduler, der Geräte wie z.B. Stepper-Motoren, Modellbau-Servos, Gleichstrom-Motoren, Elektromagnete etc. starten, stoppen und führen kann. Diese Software ist in der Programmiersprache C++ geschrieben und nutzt einerseits deren Betriebssystemnähe und Schnelligkeit, andererseits deren Möglichkeit, objektorientiert zu programmieren: sie nutzt das Konzept der Klassen und der Polymorphie. Die Ansteuerung der Geräte wie z.B. die Erzeugung der Steuerimpulse für die Modellbau-Servos oder die Taktung der Schrittmotoren erfolgt ausschließlich in der Klasse der Geräte, während die Koordinierung des Arbeitsablaufes allein die Aufgabe der Schedulerklasse ist. Diese Trennung von Steuerung und Koordinierung bringt erhebliche Vorteile mit sich: der Code wird wesentlich reduzierter, übersichtlicher und strukturierter, wodurch Programmierfehler vermieden werden können bzw. schneller auffindbar werden. Der Code ist leicht lesbar und verständlich und an verschiedenste Anforderungen einfach anpassbar. Durch die Anwendung von aussagekräftigen Variablennamen wird die klare Struktur zusätzlich optimiert. Es können prinzipiell beliebig viele Geräte gleichzeitig gesteuert und überwacht und prinzipiell beliebig viele Aufgaben abgearbeitet und untereinander koordiniert werden. Programmiert ist sie wie eine Library, wodurch sie sehr leicht für andere Anlagen und Szenarios adaptiert werden kann.<span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1"><hr/></span></p>
<p class="p9"><span class="s1"><b>Prinzipielle Programmierung</b></span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span><span class="s1">/* create a scheduler object */</span></p>
<p class="p11"><span class="s3"><span class="Apple-tab-span">	</span></span><span class="s1">cuttingProcess</span><span class="s3"> = </span><span class="s4">new</span><span class="s3"> </span><span class="s1">CCDeviceScheduler</span><span class="s3">;</span></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p10"><span class="s1"><span class="Apple-tab-span">	</span>/* add the devices */</span></p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s4">unsigned</span><span class="s1"> </span><span class="s4">char</span><span class="s1"> </span><span class="s3">catStepper =</span><span class="s1"> </span><span class="s5">cuttingProcess</span><span class="s1">-&gt;</span><span class="s6">addStepper</span><span class="s1">(CATSTEPPER_NAME, CATSTEPPER_STEP_PIN,<span class="Apple-converted-space"> </span></span></p>
<p class="p14"><span class="s1"><span class="Apple-tab-span">	</span>CATSTEPPER_DIR_PIN, CATSTEPPER_ENABLE_PIN, CATSTEPPER_HIGHEST_STEPPINGMODE,<span class="Apple-converted-space"> </span></span></p>
<p class="p15"><span class="s1"><span class="Apple-tab-span">	</span>CATSTEPPER_STEPMODECODES, CATSTEPPER_MICROSTEPPINS, CATSTEPPER_STEPS_PER_ROTATION);</span></p>
<p class="p16"><span class="s1"></span><br></p>
<p class="p13"><span class="s4"><span class="Apple-tab-span">	</span>unsigned</span><span class="s3"> </span><span class="s4">char</span><span class="s3"> liftServo = </span><span class="s5">cuttingProcess</span><span class="s3">-&gt;</span><span class="s6">addServo</span><span class="s3">(</span><span class="s1">LIFTSERVO_NAME</span><span class="s3">, </span><span class="s1">LIFTSERVO_PIN</span><span class="s3">,<span class="Apple-converted-space"> </span></span></p>
<p class="p15"><span class="s1">LIFTSERVO_MIN_POSITION</span><span class="s3">, </span><span class="s1">LIFTSERVO_MAX_POSITION</span><span class="s3">, </span><span class="s1">LIFTSERVO_PARK_POSITION</span><span class="s3">);</span></p>
<p class="p17"><span class="s1"><span class="Apple-tab-span">	</span>...</span></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p10"><span class="s1"><span class="Apple-tab-span">	</span>/* add the tasks */</span></p>
<p class="p17"><span class="s7"><span class="Apple-tab-span">	</span></span><span class="s4">unsigned</span><span class="s1"> </span><span class="s4">char</span><span class="s1"> lowerHeadForCutting = </span><span class="s5">cuttingProcess</span><span class="s1">-&gt;</span><span class="s5">device</span><span class="s1">[liftServo]-&gt;</span><span class="s6">addTask</span><span class="s1">(</span><span class="s8">CUTING_POSITION</span><span class="s1">,<span class="Apple-converted-space"> </span></span></p>
<p class="p15"><span class="s1">SPEED_SLOW</span><span class="s3">, </span><span class="s1">ACCELERATION_NORMAL</span><span class="s3">, </span><span class="s1">DECELERATION_SLOW</span><span class="s3">);</span></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p17"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s4">unsigned</span><span class="s1"> </span><span class="s4">char</span><span class="s1"> driveCatToCuttingStartPosition = </span><span class="s5">cuttingProcess</span><span class="s1">-&gt;</span><span class="s5">device</span><span class="s1">[catStepper]-&gt;</span><span class="s6">addTask</span><span class="s1">(</span></p>
<p class="p15"><span class="s1">CUTTING_START_POSITION</span><span class="s3">, </span><span class="s1">SPEED_HIGH</span><span class="s3">, </span><span class="s1">ACCELERATION_HIGH</span><span class="s3">, </span><span class="s1">DECELERATION_HIGH</span><span class="s3">);</span></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p17"><span class="s1"><span class="Apple-tab-span">	</span>...</span></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p10"><span class="s1"><span class="Apple-tab-span">	</span>/* link the tasks together */</span></p>
<p class="p17"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s5">cuttingProcess</span><span class="s1">-&gt;</span><span class="s5">device</span><span class="s1">[catStepper]-&gt;</span><span class="s5">task</span><span class="s1">[driveCatToCuttingStartPosition]-&gt;</span><span class="s6">startByDate</span><span class="s1">(</span><span class="s9">100</span><span class="s1">);</span></p>
<p class="p17"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s5">cuttingProcess</span><span class="s1">-&gt;</span><span class="s5">device</span><span class="s1">[liftServo]-&gt;</span><span class="s5">task</span><span class="s1">[lowerHeadForCutting]-&gt;</span><span class="s6">startAfterCompletionOf</span><span class="s1">(catStepper,<span class="Apple-converted-space"> </span></span></p>
<p class="p18"><span class="s1">driveCatToCuttingStartPosition);</span></p>
<p class="p17"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s5">cuttingProcess</span><span class="s1">-&gt;</span><span class="s5">device</span><span class="s1">[liftServo]-&gt;</span><span class="s5">task</span><span class="s1">[lowerHeadForCutting]-&gt;</span><span class="s6">stopDynamicallyBySensor</span><span class="s1">(</span></p>
<p class="p15"><span class="s1">DISTANCE_SENSOR</span><span class="s3">, </span><span class="s1">INITIATE_STOP_VALUE</span><span class="s3">, </span><span class="s1">TARGET_VALUE</span><span class="s3">, </span><span class="s1">ATTENUATION</span><span class="s3">, </span><span class="s1">STOP_VERY_PRECISE</span><span class="s3">);</span></p>
<p class="p17"><span class="s1"><span class="Apple-tab-span">	</span>...</span></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p12"><span class="s1"></span><br></p>
<p class="p10"><span class="s1"><span class="Apple-tab-span">	</span>/* run the tasks */</span></p>
<p class="p11"><span class="s1"><span class="Apple-tab-span">	</span>cuttingProcess-&gt;</span><span class="s6">run</span><span class="s1">();</span></p>
<p class="p19"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1"><hr/></span></p>
<p class="p9"><span class="s1"><b>Funktionsweise</b></span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">Zentrales Objekt ist der Scheduler, eine Instanz der Klasse mit dem Namen CCDeviceScheduler. Er steuert und koordiniert einen Arbeitsablauf, d.h. verschiedene Geräte führen einen Block von Aufgaben aus. Es können beliebig viele dieser Arbeitsabläufe definiert und in beliebiger Reihenfolge abgerufen werden. Zum Beispiel „fetchNewRecord“, „cuttingProcess“, „ejectRecord“ etc.</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p11"><span class="s3"><span class="Apple-tab-span">	</span></span><span class="s1">cuttingProcess</span><span class="s3"> = </span><span class="s4">new</span><span class="s3"> </span><span class="s1">CCDeviceScheduler</span><span class="s3">;</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p20"><span class="s1"><span class="Apple-tab-span">	</span>[Ein neues Scheduler-Objekt mit dem Namen „cuttingProcess“ wird erzeugt. Es soll die komplette Steuerung des Schneideprozesses übernehmen.]</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">Für die Geräte existiert eine Basisklasse „CCDevice“ bzw. die eigens entwickelten abgeleiteten Klassen „CCServoDevice“, „CCStepperDevice“ „CCSwitchingDevice“. Als abgeleitete Geräteklassen haben sie alle das gleiche Interface, verfügen also alle über die gleichen Methoden, z.B. „prepareMove()“, „startMove()“, „drive()“, „stopMove()“ etc. Sie sind insofern alle auf die gleiche Weise zu handhaben, wenngleich die Implementierung dieser Funktionen freilich in jeder abgeleiteten Klasse völlig unterschiedlich ist. Diese richtet sich nach dem zu steuernden Gerät und dessen Anforderungen, ob beispielsweise bei der Schrittmotor-Klasse Impulse genau zum richtigen Zeitpunkt oder bei der Servo-Klasse Impulse der exakt richtigen Länge generiert werden müssen.<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1">An die Geräteklasse der Motoren werden der Endpunkt, die gewünschte Beschleunigung sowie die gewünschte Geschwindigkeit übergeben. Die Geräteklassen beschleunigen den Motor mit konstanter Beschleunigung vom Stillstand bis zur gewünschten Geschwindigkeit und bremsen ihn mit konstanter Beschleunigung bis zum Stillstand an der Zielposition ab.</span></p>
<p class="p5"><span class="s1">Wenn notwendig, könnten hier weitere abgeleitete Klassen z.B. zur gepulsten Steuerung von Elektromagneten o.ä. hinzugefügt werden.<span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">Der Scheduler enthält ein Array dieser Basisklasse „CCDevice“, in das alle Geräte eingetragen werden. Es können beliebig viele Geräte (Instanzen der abgeleiteten Klassen dieser Klasse) zum Scheduler hinzugefügt, d.h. in dieses Array eingetragen werden. Dies geschieht durch die Funktionen „addServo(...)“, „addStepper(...)“, „addSwitch(...)“ etc. des Schedulers, in der sämtliche Parameter dieses Geräts übergeben werden:</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p13"><span class="s4"><span class="Apple-tab-span">	</span>unsigned</span><span class="s3"> </span><span class="s4">char</span><span class="s3"> liftServo = </span><span class="s5">cuttingProcess</span><span class="s3">-&gt;</span><span class="s6">addServo</span><span class="s3">(</span><span class="s1">LIFTSERVO_NAME</span><span class="s3">, </span><span class="s1">LIFTSERVO_PIN</span><span class="s3">,<span class="Apple-converted-space"> </span></span></p>
<p class="p15"><span class="s1">LIFTSERVO_MIN_POSITION</span><span class="s3">, </span><span class="s1">LIFTSERVO_MAX_POSITION</span><span class="s3">, </span><span class="s1">LIFTSERVO_PARK_POSITION</span><span class="s3">);</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p20"><span class="s1"><span class="Apple-tab-span">	</span>[Ein neues Device-Objekt vom Typ Modellbauservo wird dem Device-Array des Schedulers hinzugefügt. Das Device-Array des Schedulers heißt „device“. Übergeben wird ein Name, mit dem dieses Servo im Ablaufprotokoll erscheint, der Pin, mit dem es gesteuert wird, ein minimaler und ein maximaler Positionswert und die Parkposition.]</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">Rückgabewert dieser Funktion ist der Index dieses Gerätes im Geräte-Array („device[]“) des Schedulers. Mit diesem Geräteindex ist das Gerät dann eindeutig identifizierbar. Wird dieser Wert in einer aussagekräftigen Variable gespeichert, ist es sehr einfach, dieses Gerät anzusprechen:<span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p11"><span class="s10"><span class="Apple-tab-span">	</span></span><span class="s1">cuttingProcess</span><span class="s3">-&gt;</span><span class="s1">device</span><span class="s3">[liftServo]...</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">Zu diesen Geräten des Schedulers können nun beliebig viele Aufgaben hinzugefügt werden. Die Klasse „CCDevice“ enthält ein Aufgaben-Array mit dem Namen „task[]“. Die Eintragung von Aufgaben in dieses Array bewerkstelligt die Funktion addTask(...) des jeweiligen Gerätes: Übergeben werden sämtliche Parameter dieser Aufgabe:</span></p>
<p class="p8"><span class="s1"></span><br></p>
<p class="p17"><span class="s7"><span class="Apple-tab-span">	</span></span><span class="s4">unsigned</span><span class="s1"> </span><span class="s4">char</span><span class="s1"> lowerHeadForCutting = </span><span class="s5">cuttingProcess</span><span class="s1">-&gt;</span><span class="s5">device</span><span class="s1">[liftServo]-&gt;</span><span class="s6">addTask</span><span class="s1">(</span><span class="s8">CUTING_POSITION</span><span class="s1">,<span class="Apple-converted-space"> </span></span></p>
<p class="p15"><span class="s1">SPEED_SLOW</span><span class="s3">, </span><span class="s1">ACCELERATION_NORMAL</span><span class="s3">, </span><span class="s1">DECELERATION_SLOW</span><span class="s3">, </span><span class="s1">NO_DELAY</span><span class="s3">);</span></p>
<p class="p19"><span class="s1"></span><br></p>
<p class="p20"><span class="s1">[Dem Gerät "liftServo" wird eine neue Aufgabe hinzugefügt: Fahre zur Position "CUTTING_POSITION" mit der Geschwindigkeit "SPEED_SLOW", der Beschleunigung "ACCELERATION_NORMAL" bzw. "DECELERATION_SLOW". Die Aufgabe startet ohne Startverzögerung. Sein Index wird in der Variable „lowerHeadForCutting“ abgelegt.]</span></p>
<p class="p19"><span class="s1"></span><br></p>
<p class="p8"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">Rückgabewert dieser Funktion ist wiederum der Index dieser Aufgabe im Aufgaben-Array, mit dem diese Aufgabe eindeutig identifiziert ist. Dieser Wert wird wiederum in einer aussagekräftigen Variable gespeichert, damit sie später leicht angesprochen werden kann.</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">Gestartet, gestoppt und manipuliert werden können die Geräte durch Zeitablauf, durch die Zustandsänderung angeschlossener Sensoren, durch das Erreichen eines Zustandes bzw. einer Position dieses Gerätes sowie durch das Erreichen eines Zustandes bzw. einer Position jedes anderen Gerätes. Entsprechend lauten die Methoden der Aufgaben („task[]“): startByDate(...), startByButton(...), startAfterMy(...), startAfterCompletionOf(...), startByTriggerpositionOf(...), switchToNextTaskByDate(...), switchToNextTaskByButton(...), switchToNextTaskAfterCompletionOf(...), switchToNextTaskByTriggerpositionOf(...), stopByTimeout(...), stopByButton(...), stopAfterCompletionOf(...), stopByTriggerpositionOf(...), stopDynamicallyBySensor(...);</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p17"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s5">cuttingProcess</span><span class="s1">-&gt;</span><span class="s5">device</span><span class="s1">[catStepper]-&gt;</span><span class="s5">task</span><span class="s1">[driveCatToCuttingStartPosition]-&gt;</span><span class="s6">startByDate</span><span class="s1">(</span><span class="s9">100</span><span class="s1">);</span></p>
<p class="p21"><span class="s1"></span><br></p>
<p class="p20"><span class="s1">[Die Aufgabe "</span><span class="s11">driveCatToCuttingStartPosition</span><span class="s1">" soll 100 ms nachdem der Scheduler („cuttingProcess“) gestartet wurde, ausgeführt werden.]</span></p>
<p class="p21"><span class="s1"></span><br></p>
<p class="p22"><span class="s1"></span><br></p>
<p class="p17"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s5">cuttingProcess</span><span class="s1">-&gt;</span><span class="s5">device</span><span class="s1">[liftServo]-&gt;</span><span class="s5">task</span><span class="s1">[lowerHeadForCutting]-&gt;</span><span class="s6">startAfterCompletionOf</span><span class="s1">(catStepper,<span class="Apple-converted-space"> </span></span></p>
<p class="p18"><span class="s1">driveCatToCuttingStartPosition);</span></p>
<p class="p21"><span class="s1"></span><br></p>
<p class="p20"><span class="s1">[Die Aufgabe "lowerHeadForCutting" wird gestartet, nachdem die Aufgabe "driveCatToCuttingStart" des Schneideschlittenantriebs abgeschlossen ist.]</span></p>
<p class="p21"><span class="s1"></span><br></p>
<p class="p22"><span class="s1"></span><br></p>
<p class="p17"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s5">cuttingProcess</span><span class="s1">-&gt;</span><span class="s5">device</span><span class="s1">[liftServo]-&gt;</span><span class="s5">task</span><span class="s1">[lowerHeadForCutting]-&gt;</span><span class="s6">stopDynamicallyBySensor</span><span class="s1">(</span></p>
<p class="p15"><span class="s1">DISTANCE_SENSOR</span><span class="s3">, </span><span class="s1">INITIATE_STOP_VALUE</span><span class="s3">, </span><span class="s1">TARGET_VALUE</span><span class="s3">, </span><span class="s1">ATTENUATION</span><span class="s3">, </span><span class="s1">STOP_VERY_PRECISE</span><span class="s3">);</span></p>
<p class="p21"><span class="s1"></span><br></p>
<p class="p20"><span class="s1">[Die Aufgabe "lowerHeadForCutting" wird entsprechend der Sensorwerte des Distanzsensors im Schneidekopf dynamisch gestoppt.]</span></p>
<p class="p21"><span class="s1"></span><br></p>
<p class="p21"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">Nachdem die Parameter aller Aufgaben definiert sind, kann der Prozess gestartet werden. Jetzt startet, koordiniert und beendet der Scheduler alle Aufgaben entsprechend der Eingabe.</span></p>
<p class="p21"><span class="s1"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-tab-span">	</span>cuttingProcess-&gt;</span><span class="s6">run</span><span class="s1">();</span></p>
<p class="p23"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p23"><br></p>
<p class="p24"><span class="s1">1</span></p>
</body>
</html>
